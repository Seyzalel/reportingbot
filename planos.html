<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Planos - Reporting Bot</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Segoe+UI:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<style>
:root {
    --primary: #6366f1;
    --primary-dark: #4f46e5;
    --primary-darker: #4338ca;
    --secondary: #8b5cf6;
    --accent: #ec4899;
    --light: #fff;
    --light-gray: #f8fafc;
    --gray: #e2e8f0;
    --dark-gray: #64748b;
    --darker-gray: #475569;
    --dark: #0f172a;
    --success: #10b981;
    --error: #ef4444;
    --warning: #f59e0b;
    --r: 14px;
    --pad: 1.25rem;
    --gap: 1rem;
    --fs-xxl: 2rem;
    --fs-xl: 1.5rem;
    --fs-lg: 1.125rem;
    --fs-md: 0.95rem;
    --fs-sm: 0.85rem;
    --fs-xs: 0.75rem;
    --bg-primary: #0a0a0a;
    --bg-secondary: #111111;
    --bg-tertiary: #1a1a1a;
    --bg-card: #1e1e1e;
    --text-primary: #f8fafc;
    --text-secondary: #cbd5e1;
    --text-muted: #94a3b8;
    --border-color: #2d2d2d;
    --shadow-strong: 0 20px 40px -12px rgba(0, 0, 0, 0.5);
    --shadow-soft: 0 8px 24px -12px rgba(0, 0, 0, 0.4);
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --gradient-primary: linear-gradient(135deg, var(--primary), var(--secondary));
    --header-height: 72px;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;font-family:'Segoe UI',system-ui,-apple-system,sans-serif;background:var(--bg-primary);color:var(--text-primary);-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;scroll-behavior:smooth;font-size:14px}
a{text-decoration:none;color:inherit}
header{position:fixed;top:0;left:0;right:0;z-index:1000;background:rgba(10,10,10,0.98);backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,0.08);height:var(--header-height);display:flex;align-items:center}
.container{width:min(1200px,95%);margin:0 auto;padding:0 1rem}
.header-container{width:min(1200px,95%);margin:0 auto;padding:0 1rem}
.header-inner{display:flex;align-items:center;justify-content:space-between;width:100%}
.brand{font-weight:800;font-size:1.5rem;letter-spacing:-0.5px;background:linear-gradient(135deg,var(--text-primary) 0%,var(--primary) 100%);-webkit-background-clip:text;background-clip:text;color:transparent}
nav.desktop{display:flex;align-items:center;gap:1.5rem}
.nav-link{font-weight:600;color:var(--text-secondary);padding:0.5rem 0.75rem;border-radius:8px;transition:var(--transition);font-size:0.9rem;position:relative}
.nav-link:hover{color:var(--text-primary);background:rgba(255,255,255,0.05)}
.nav-link.active{color:var(--primary);background:rgba(99,102,241,0.1)}
.nav-link::after{content:'';position:absolute;bottom:0;left:50%;width:0;height:2px;background:var(--primary);transition:var(--transition);transform:translateX(-50%)}
.nav-link:hover::after{width:70%}
.btn{display:inline-flex;align-items:center;justify-content:center;padding:0.65rem 1.5rem;border:none;border-radius:10px;font-weight:600;font-size:0.85rem;cursor:pointer;transition:var(--transition);gap:0.5rem;letter-spacing:0.5px}
.btn.primary{background:var(--primary);color:white;position:relative;overflow:hidden}
.btn.primary:hover{background:#7c3aed;transform:translateY(-2px);box-shadow:0 10px 25px rgba(139,92,246,0.3)}
.btn.secondary{background:transparent;color:var(--text-primary);border:1px solid rgba(255,255,255,0.15)}
.btn.secondary:hover{border-color:var(--primary);background:rgba(139,92,246,0.05)}
.mobile-toggle{display:none;background:transparent;border:none;color:var(--text-primary);font-size:1.25rem;cursor:pointer;padding:0.5rem;border-radius:8px}
.mobile-toggle:hover{background:rgba(255,255,255,0.1)}
.main-content{padding-top:calc(var(--header-height) + 1.5rem);padding-bottom:2rem;position:relative;z-index:1}
.grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:var(--gap);margin-block:2rem;perspective:1000px}
@media(max-width:980px){.grid{grid-template-columns:1fr}}
.card{position:relative;background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--r);padding:var(--pad);box-shadow:var(--shadow-soft);overflow:hidden;transition:var(--transition)}
.card:hover{transform:translateY(-4px);box-shadow:var(--shadow-strong)}
.badge{position:absolute;top:1rem;right:1rem;padding:0.35rem 0.75rem;border-radius:6px;background:var(--gradient-primary);color:#fff;font-weight:700;font-size:0.75rem;z-index:2}
.period-chip{display:inline-flex;align-items:center;gap:0.4rem;margin-bottom:1rem;padding:0.35rem 0.7rem;border-radius:6px;border:1px solid rgba(16,185,129,0.25);background:rgba(16,185,129,0.12);color:var(--success);font-weight:600;font-size:0.75rem}
.period-chip i{font-size:0.7rem}
.head{display:flex;align-items:center;gap:0.75rem;margin-bottom:0.75rem}
.head .icon{width:2.5rem;height:2.5rem;border-radius:10px;display:flex;align-items:center;justify-content:center;background:var(--gradient-primary)}
.head .icon i{font-size:1rem;color:#fff}
.title{font-weight:700;font-size:1.25rem;color:var(--text-primary)}
.price{display:flex;align-items:flex-end;gap:0.5rem;margin-bottom:0.5rem}
.price .amount{font-size:1.75rem;font-weight:800;color:var(--text-primary)}
.price .period{color:var(--text-secondary);font-weight:600;font-size:0.9rem}
.quota{font-size:0.85rem;color:var(--text-secondary);line-height:1.4;margin-bottom:1rem}
.features{margin:1rem 0;display:grid;gap:0.5rem}
.feature{display:flex;align-items:flex-start;gap:0.5rem;color:var(--text-secondary);font-size:0.85rem}
.feature i{color:var(--success);min-width:1rem;font-size:0.8rem}
.payline{display:flex;align-items:center;gap:0.5rem;margin-top:0.5rem;font-weight:600;color:var(--text-primary);font-size:0.85rem}
.actions{display:flex;flex-direction:column;gap:0.5rem;margin-top:1rem}
.btn-plan{width:100%;padding:0.85rem;border:none;border-radius:10px;font-weight:600;font-size:0.9rem;color:#fff;background:var(--gradient-primary);cursor:pointer;transition:var(--transition);display:flex;align-items:center;justify-content:center;gap:0.5rem}
.btn-plan:hover{transform:translateY(-2px);box-shadow:0 10px 25px rgba(99,102,241,0.3)}
.note{font-size:0.75rem;color:var(--text-muted);text-align:center}
.compare{margin-top:2rem;background:var(--bg-card);border:1px solid var(--border-color);border-radius:var(--r);overflow:hidden}
.table{width:100%;border-collapse:collapse;font-size:0.85rem}
.table th,.table td{padding:0.85rem 1rem;border-bottom:1px solid var(--border-color);text-align:left}
.table th{background:var(--bg-tertiary);font-weight:600;color:var(--text-primary)}
.table td{background:var(--bg-card);color:var(--text-primary)}
.table td.center{text-align:center}
.toast{position:fixed;left:50%;top:20px;transform:translateX(-50%) translateY(-20px);opacity:0;z-index:50;background:var(--bg-card);border:1px solid var(--border-color);border-radius:8px;box-shadow:var(--shadow-strong);padding:0.75rem 1rem;font-weight:600;display:flex;align-items:center;gap:0.5rem;transition:var(--transition)}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}
.confetti{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden;z-index:60}
footer{color:var(--text-muted);text-align:center;font-size:0.85rem;padding:1.5rem 0;border-top:1px solid var(--border-color);margin-top:2rem}
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:2000;padding:1rem}
.modal.show{display:flex}
.modal .overlay{position:absolute;inset:0;background:rgba(0,0,0,.8);backdrop-filter:blur(10px);z-index:0}
.modal .panel{position:relative;z-index:1;width:min(500px,95%);border-radius:var(--r);border:1px solid var(--border-color);background:var(--bg-card);box-shadow:var(--shadow-strong);padding:1.5rem}
.modal .head{display:flex;align-items:center;justify-content:space-between;margin:0}
.modal .hleft{display:flex;align-items:center;gap:0.75rem}
.modal .hicon{width:2.5rem;height:2.5rem;border-radius:10px;display:flex;align-items:center;justify-content:center;background:var(--gradient-primary)}
.modal .hicon i{color:#fff}
.modal .htitle{font-weight:700;color:var(--text-primary)}
.modal .close{appearance:none;border:none;background:transparent;font-size:1.25rem;cursor:pointer;color:var(--text-secondary);padding:0.5rem;border-radius:8px;transition:var(--transition)}
.modal .close:hover{background:rgba(255,255,255,0.1);color:var(--text-primary)}
.actions-modal{display:flex;gap:0.75rem;margin-top:1rem}
.btn-ghost{padding:0.75rem 1.25rem;border-radius:8px;background:var(--bg-tertiary);border:1px solid var(--border-color);color:var(--text-primary);font-weight:600;cursor:pointer;transition:var(--transition)}
.btn-ghost:hover{background:rgba(255,255,255,0.1);border-color:var(--border-color)}
.btn-primary{padding:0.75rem 1.5rem;border-radius:8px;background:var(--gradient-primary);color:#fff;font-weight:600;cursor:pointer;transition:var(--transition)}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 10px 25px rgba(99,102,241,0.3)}
@keyframes fall{0%{transform:translateY(-20vh) rotate(0turn);opacity:1}100%{transform:translateY(60vh) rotate(1.5turn);opacity:0}}
@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.02)}100%{transform:scale(1)}}
@keyframes pop{0%{opacity:0;transform:translateY(8px) scale(.98)}100%{opacity:1;transform:translateY(0) scale(1)}}
.modal.show .panel{animation:pop .28s ease}
.overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7);backdrop-filter:blur(5px);opacity:0;visibility:hidden;transition:var(--transition);z-index:1500}
.overlay.active{opacity:1;visibility:visible}
.mobile-menu{position:fixed;top:0;right:-100%;width:100%;max-width:320px;height:100vh;background:var(--bg-primary);border-left:1px solid var(--border-color);padding:1.5rem;transition:var(--transition);z-index:2000;overflow-y:auto}
.mobile-menu.active{right:0}
.mobile-menu-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem;padding-bottom:1rem;border-bottom:1px solid var(--border-color)}
.mobile-menu-nav{display:flex;flex-direction:column;gap:0.75rem}
.mobile-nav-link{padding:0.85rem;border-radius:10px;color:var(--text-primary);font-weight:600;transition:var(--transition);border:1px solid transparent;font-size:0.9rem}
.mobile-nav-link:hover{background:rgba(255,255,255,0.05);border-color:var(--border-color)}
.mobile-menu-cta{margin-top:2rem;display:flex;flex-direction:column;gap:0.75rem}
.body-modal-open{overflow:hidden}
@media(max-width:768px){
    nav.desktop{display:none}
    .mobile-toggle{display:flex}
    .grid{gap:1rem}
    .actions-modal{flex-direction:column}
    .table th,.table td{padding:0.75rem}
}
@media(max-width:480px){
    .container{padding:0 0.75rem}
    .card{padding:1rem}
    .modal .panel{padding:1.25rem}
}
</style>
</head>
<body>
<header>
<div class="header-container">
<div class="header-inner">
<div class="brand">Reporting Bot</div>
<nav class="desktop">
<a href="/dashboard" class="nav-link">Dashboard</a>
<a href="/plans" class="nav-link active">Planos</a>
<a href="/logout" class="btn secondary">Sair</a>
</nav>
<button class="mobile-toggle" id="mobileToggle">
<i class="fas fa-bars"></i>
</button>
</div>
</div>
</header>
<div class="overlay" id="overlay"></div>
<div class="mobile-menu" id="mobileMenu">
<div class="mobile-menu-header">
<div class="brand">Reporting Bot</div>
<button class="mobile-toggle" id="mobileClose">
<i class="fas fa-times"></i>
</button>
</div>
<nav class="mobile-menu-nav">
<a href="/dashboard" class="mobile-nav-link">Dashboard</a>
<a href="/plans" class="mobile-nav-link">Planos</a>
</nav>
<div class="mobile-menu-cta">
<a href="/logout" class="btn secondary">Sair</a>
</div>
</div>
<div class="container main-content">
<h1 style="font-weight:700;font-size:1.75rem;margin-bottom:0.5rem;text-align:center">Escolha seu plano</h1>
<p style="color:var(--text-secondary);text-align:center;max-width:600px;margin:0 auto 2rem auto;font-size:0.95rem">Planos mensais de 30 dias e opção vitalícia. Pagamento exclusivo via Pix, ativação imediata</p>
<div class="grid">
<article class="card" data-plan="Essencial" data-price="R$35" data-period="30 dias">
<div class="period-chip"><i class="fa-solid fa-rotate"></i> Mensal (30 dias)</div>
<div class="head">
<div class="icon"><i class="fa-regular fa-gem"></i></div>
<div class="title">Essencial</div>
</div>
<div class="price">
<div class="amount">R$35</div>
<div class="period">/ mês • 30 dias</div>
</div>
<div class="quota">Indicado para remover contas de até 300 seguidores</div>
<div class="features">
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Permite denunciar até 5 contas por dia</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Intervalo mínimo de 1 hora para repetir a mesma conta</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Limite de até 500 denúncias por conta</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Suporte por WhatsApp</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Fila de processamento padrão</span></div>
</div>
<div class="payline"><i class="fa-brands fa-pix"></i><span>Pagamento via Pix</span></div>
<div class="actions">
<button class="btn-plan select" type="button"><i class="fa-solid fa-cart-shopping"></i>Assinar Essencial</button>
<div class="note">QR Code Pix emitido na confirmação</div>
</div>
</article>
<article class="card" data-plan="Profissional" data-price="R$45,50" data-period="30 dias">
<div class="badge">Mais popular</div>
<div class="period-chip"><i class="fa-solid fa-rotate"></i> Mensal (30 dias)</div>
<div class="head">
<div class="icon"><i class="fa-solid fa-rocket"></i></div>
<div class="title">Profissional</div>
</div>
<div class="price">
<div class="amount">R$45,50</div>
<div class="period">/ mês • 30 dias</div>
</div>
<div class="quota">Exigente para remover contas de até 10.000 seguidores e não verificadas</div>
<div class="features">
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Permite denunciar até 15 contas por dia</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Permite repetir a mesma conta</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Limite de até 5.000 denúncias por conta</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Suporte por WhatsApp</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Processamento de fila prioritário</span></div>
</div>
<div class="payline"><i class="fa-brands fa-pix"></i><span>Pagamento via Pix</span></div>
<div class="actions">
<button class="btn-plan select" type="button"><i class="fa-solid fa-cart-shopping"></i>Assinar Profissional</button>
<div class="note">QR Code Pix emitido na confirmação</div>
</div>
</article>
<article class="card" data-plan="Vitalício" data-price="R$119" data-period="Acesso permanente">
<div class="badge">Melhor valor</div>
<div class="head">
<div class="icon"><i class="fa-solid fa-infinity"></i></div>
<div class="title">Vitalício</div>
</div>
<div class="price">
<div class="amount">R$119</div>
<div class="period">• acesso permanente</div>
</div>
<div class="quota">Ideal para remover contas sem limites de seguidores e verificadas por assinatura</div>
<div class="features">
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Sem renovação: acesso vitalício</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Permite repetir a mesma conta</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Limite de até 15.950 denúncias por conta</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Suporte por WhatsApp</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Recursos ilimitados, sucesso garantido e maior prioridade</span></div>
</div>
<div class="payline"><i class="fa-brands fa-pix"></i><span>Pagamento via Pix</span></div>
<div class="actions">
<button class="btn-plan select" type="button"><i class="fa-solid fa-cart-shopping"></i>Assinar Vitalício</button>
<div class="note">Pagamento único com Pix</div>
</div>
</article>
</div>
<section class="compare">
<table class="table" id="compare-table">
<thead>
<tr><th>Recursos</th><th>Essencial</th><th>Profissional</th><th>Vitalício</th></tr>
</thead>
<tbody>
<tr><td>Contas por dia</td><td class="center">5</td><td class="center">15</td><td class="center">Sob demanda</td></tr>
<tr><td>Repetir mesma conta</td><td class="center">Após 1h</td><td class="center">Permitido</td><td class="center">Permitido</td></tr>
<tr><td>Limite denúncias por operação</td><td class="center">500</td><td class="center">5.000</td><td class="center">15.950</td></tr>
<tr><td>Período</td><td class="center">30 dias</td><td class="center">30 dias</td><td class="center">Permanente</td></tr>
<tr><td>Pagamento</td><td class="center">Pix</td><td class="center">Pix</td><td class="center">Pix (único)</td></tr>
<tr><td>Prioridade</td><td class="center"><i class="fa-regular fa-circle"></i></td><td class="center"><i class="fa-solid fa-circle-half-stroke"></i></td><td class="center"><i class="fa-solid fa-star"></i></td></tr>
<tr><td>Suporte</td><td class="center">Chat</td><td class="center">Chat</td><td class="center">Chat</td></tr>
</tbody>
</table>
</section>
</div>
<div id="toast" class="toast" aria-live="polite"><i class="fa-solid fa-circle-check" style="color:#10b981"></i><span id="toast-text">Plano selecionado</span></div>
<div id="confetti" class="confetti" aria-hidden="true"></div>
<div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="dlg-title">
<div class="overlay" id="modal-overlay"></div>
<div class="panel" id="modal-panel" aria-live="polite" role="document"></div>
</div>
<footer>Reporting Bot © 2025 • Todos os direitos reservados</footer>
<script id="plans-data" type="application/json">{"plans":""}</script>
<script>
document.addEventListener('DOMContentLoaded',function(){
function parsePlans(){
try{
var el=document.getElementById("plans-data");
var raw=el&&el.textContent?el.textContent.trim():"";
if(!raw)return null;
var data=JSON.parse(raw);
return data&&typeof data==="object"?data:null;
}catch(e){
return null;
}
}
function brl(cents){
if(!Number.isFinite(cents))return"";
var r=cents/100;
var isInt=cents%100===0;
return isInt?("R$"+Math.trunc(r).toLocaleString("pt-BR")):("R$"+r.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}));
}
function mergePlans(runtime){
var base={
"Essencial":{"amount_cents":3500,"active":true},
"Profissional":{"amount_cents":4550,"active":true},
"Vitalício":{"amount_cents":11900,"active":true}
};
if(!runtime)return base;
var out=Object.assign({},base);
Object.keys(base).forEach(function(k){
if(runtime[k]&&typeof runtime[k]==="object"){
if(Number.isFinite(runtime[k].amount_cents))out[k].amount_cents=parseInt(runtime[k].amount_cents,10);
if(typeof runtime[k].active==="boolean")out[k].active=runtime[k].active;
}
});
return out;
}
function applyPrices(plans){
document.querySelectorAll(".card").forEach(function(card){
var name=card.getAttribute("data-plan");
var cfg=plans[name];
if(!cfg)return;
var priceStr=brl(cfg.amount_cents);
var amountEl=card.querySelector(".amount");
amountEl&&(amountEl.textContent=priceStr);
card.setAttribute("data-price",priceStr);
if(cfg.active!==true){
card.style.display="none";
}else{
card.style.display="";
}
});
var table=document.getElementById("compare-table");
if(table){
var headers=Array.from(table.querySelectorAll("thead th"));
var colIndexByName={};
headers.forEach(function(th,i){
colIndexByName[th.textContent.trim()]=i;
});
Object.keys(plans).forEach(function(name){
if(plans[name].active!==true){
var idx=colIndexByName[name];
if(typeof idx==="number"&&idx>0){
headers[idx].style.display="none";
table.querySelectorAll("tbody tr").forEach(function(tr){
var cells=tr.querySelectorAll("td");
cells[idx]&&(cells[idx].style.display="none");
});
}
}else{
var idx2=colIndexByName[name];
if(typeof idx2==="number"&&idx2>0){
headers[idx2].style.display="";
table.querySelectorAll("tbody tr").forEach(function(tr){
var cells=tr.querySelectorAll("td");
cells[idx2]&&(cells[idx2].style.display="");
});
}
}
});
}
}
function showToast(msg){
if(!toast||!toastText)return;
toastText.textContent=msg;
toast.classList.add("show");
setTimeout(function(){
toast.classList.remove("show");
},1600);
}
function burstConfetti(x,y){
if(!confetti)return;
var n=28;
for(var i=0;i<n;i++){
var p=document.createElement("span");
p.style.position="absolute";
p.style.left=x+"px";
p.style.top=y+"px";
p.style.width="10px";
p.style.height="10px";
p.style.borderRadius="2px";
p.style.background="hsl("+Math.floor(Math.random()*360)+" 90% 60%)";
p.style.transform="translateY(-20vh)";
p.style.animation="fall 1.2s ease forwards";
p.style.filter="drop-shadow(0 6px 6px rgba(0,0,0,.2))";
p.style.left="calc("+x+"px + "+(Math.random()*80-40)+"px)";
confetti.appendChild(p);
(function(el){
setTimeout(function(){
el.parentNode&&el.parentNode.removeChild(el);
},1300);
})(p);
}
}
function handleTabTrap(e){
if(!modal||!modal.classList.contains("show"))return;
var focusables=modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
var f=Array.from(focusables).filter(function(el){return!el.hasAttribute("disabled")&&el.tabIndex!==-1;});
if(f.length===0)return;
var first=f[0];
var last=f[f.length-1];
if(e.key==="Tab"){
if(e.shiftKey&&document.activeElement===first){
e.preventDefault();
last.focus();
}else if(!e.shiftKey&&document.activeElement===last){
e.preventDefault();
first.focus();
}
}
}
function openThankYouModal(plan,price,period){
lastFocus=document.activeElement;
if(!modal)return;
var panel=document.getElementById('modal-panel');
if(!panel)return;
panel.innerHTML=''
+'<div class="head">'
+'  <div class="hleft"><div class="hicon"><i class="fa-brands fa-pix"></i></div><div class="htitle" id="dlg-title">Obrigado. Quase lá!</div></div>'
+'  <button class="close" id="closeModal" aria-label="Fechar"><i class="fa-solid fa-xmark"></i></button>'
+'</div>'
+'<div style="margin-top:12px">'
+'  <div class="kv" style="margin-bottom:10px"><div class="k">Plano</div><div class="v" id="m-plan">'+escapeHtml(plan)+'</div></div>'
+'  <div class="kv" style="margin-bottom:10px"><div class="k">Valor</div><div class="v" id="m-price">'+escapeHtml(price)+'</div></div>'
+'  <div class="kv" style="margin-bottom:6px"><div class="k">Período</div><div class="v" id="m-period">'+escapeHtml(period||'')+'</div></div>'
+'  <p style="margin-top:12px;color:var(--text-secondary);font-size:0.95rem;line-height:1.45">Recebemos sua solicitação. Ao prosseguir você será redirecionado para a cobrança Pix com os dados do plano selecionado. Após o pagamento, o acesso será ativado automaticamente.</p>'
+'  <div id="checkout-error" role="status" aria-live="polite" style="margin-top:10px;color:var(--error);font-weight:800;display:none"></div>'
+'  <div class="actions-modal" style="margin-top:14px">'
+'    <button type="button" class="btn-ghost" id="cancelBtn">Cancelar</button>'
+'    <button type="button" class="btn-primary" id="continueBtn">Continuar para Pix</button>'
+'  </div>'
+'</div>';
modal.classList.add('show');
document.body.classList.add('body-modal-open');
setTimeout(function(){
try{var cb=document.getElementById('continueBtn');if(cb)cb.focus();}catch(e){}
},50);
var closeBtn=document.getElementById('closeModal');
var cancelBtn=document.getElementById('cancelBtn');
var continueBtn=document.getElementById('continueBtn');
var errEl=document.getElementById('checkout-error');
function closeAndRestore(){
modal&&modal.classList.remove('show');
document.body.classList.remove('body-modal-open');
if(lastFocus&&typeof lastFocus.focus==='function')try{lastFocus.focus();}catch(e){}
}
if(closeBtn)closeBtn.addEventListener('click',function(){closeAndRestore();});
if(cancelBtn)cancelBtn.addEventListener('click',function(){closeAndRestore();});
if(continueBtn)continueBtn.addEventListener('click',function(){
var planValue=(document.getElementById('m-plan')&&document.getElementById('m-plan').textContent)||plan||'';
if(!planValue)return;
continueBtn.disabled=true;
var originalText=continueBtn.textContent;
continueBtn.textContent='Aguarde — gerando cobrança...';
if(errEl){errEl.style.display='none';errEl.textContent='';}
var csrfMeta=document.querySelector('meta[name="csrf-token"]');
var headers={
'Accept':'application/json',
'Content-Type':'application/json',
'X-Requested-With':'XMLHttpRequest'
};
if(csrfMeta&&csrfMeta.getAttribute&&csrfMeta.getAttribute('content')){
headers['X-CSRF-Token']=csrfMeta.getAttribute('content');
}
fetch('/pixPayment',{
method:'POST',
headers:headers,
body:JSON.stringify({plan:planValue})
}).then(function(resp){
return resp.json().catch(function(){return{ok:false,error:'Resposta inválida do servidor'};});
}).then(function(json){
if(json&&json.ok&&json.redirect){
window.location.href=json.redirect;
return;
}
var msg=(json&&(json.message||json.error||json.code))||'Não foi possível gerar a cobrança.';
if(errEl){errEl.textContent=String(msg);errEl.style.display='';}
else alert(String(msg));
}).catch(function(err){
var m=(err&&err.message)?err.message:'Erro ao gerar cobrança';
if(errEl){errEl.textContent=String(m);errEl.style.display='';}
else alert(String(m));
}).finally(function(){
continueBtn.disabled=false;
continueBtn.textContent=originalText;
});
});
}
function escapeHtml(s){
return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;');
}
var runtimePlans=parsePlans();
var currentPlans=mergePlans(runtimePlans);
applyPrices(currentPlans);
var toast=document.getElementById("toast");
var toastText=document.getElementById("toast-text");
var confetti=document.getElementById("confetti");
var modal=document.getElementById("modal");
var overlay=document.getElementById("overlay");
var mobileToggle=document.getElementById("mobileToggle");
var mobileClose=document.getElementById("mobileClose");
var mobileMenu=document.getElementById("mobileMenu");
var mobileOverlay=document.getElementById("overlay");
function toggleMobileMenu(){
mobileMenu.classList.toggle("active");
mobileOverlay.classList.toggle("active");
document.body.style.overflow=mobileMenu.classList.contains("active")?"hidden":"";
}
mobileToggle.addEventListener("click",toggleMobileMenu);
mobileClose.addEventListener("click",toggleMobileMenu);
mobileOverlay.addEventListener("click",toggleMobileMenu);
document.addEventListener("keydown",function(e){
if(e.key==="Escape"&&mobileMenu.classList.contains("active")){
toggleMobileMenu();
}
});
var lastFocus=null;
document.addEventListener("click",function(e){
var sel=e.target.closest&&e.target.closest(".card .select");
if(!sel)return;
var card=sel.closest&&sel.closest(".card")||sel.parentElement;
try{if(getComputedStyle(card).display==="none")return;}catch(ee){}
card.style.animation="pulse .6s ease";
setTimeout(function(){card.style.animation="";},620);
var plan=card.getAttribute("data-plan")||'';
var price=card.getAttribute("data-price")||'';
var period=card.getAttribute("data-period")||'';
showToast(plan+" selecionado ("+price+" • "+period+" • Pix)");
var r=card.getBoundingClientRect();
burstConfetti(r.left+r.width/2,r.top+window.scrollY+40);
openThankYouModal(plan,price,period);
});
var modalOverlay=document.getElementById("modal-overlay");
if(modalOverlay){
modalOverlay.addEventListener("click",function(){
if(modal&&modal.classList.contains("show")){
modal.classList.remove("show");
document.body.classList.remove("body-modal-open");
if(lastFocus&&typeof lastFocus.focus==="function")try{lastFocus.focus();}catch(e){}
}
});
}
document.addEventListener("keydown",function(e){
if(e.key==="Escape"&&modal&&modal.classList.contains("show")){
modal.classList.remove("show");
document.body.classList.remove("body-modal-open");
if(lastFocus&&typeof lastFocus.focus==="function")try{lastFocus.focus();}catch(err){}
}
handleTabTrap(e);
});
});
</script>
</body>
</html>
