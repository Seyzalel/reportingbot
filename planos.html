<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Planos - Reporting Bot</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<style>
:root {
    --bg-primary: #0a0a0a;
    --bg-secondary: #111111;
    --bg-tertiary: #1a1a1a;
    --bg-card: #1e1e1e;
    --accent-primary: #8b5cf6;
    --accent-secondary: #6366f1;
    --accent-tertiary: #ec4899;
    --text-primary: #f8fafc;
    --text-secondary: #cbd5e1;
    --text-muted: #94a3b8;
    --border-color: #2d2d2d;
    --success: #10b981;
    --error: #ef4444;
    --warning: #f59e0b;
    --r: 18px;
    --pad: clamp(1rem, 2.2vw, 2rem);
    --gap: clamp(.7rem, 2vw, 1.5rem);
    --fs-xxl: clamp(1.6rem, 4.2vw, 2.85rem);
    --fs-xl: clamp(1.25rem, 2.8vw, 2.1rem);
    --fs-lg: clamp(1.02rem, 1.7vw, 1.3rem);
    --fs-md: clamp(.95rem, 1.3vw, 1.05rem);
    --fs-sm: clamp(.84rem, 1vw, .95rem);
    --shadow-strong: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    --shadow-soft: 0 10px 30px -12px rgba(0, 0, 0, 0.4);
    --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    --gradient-primary: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
    --gradient-dark: linear-gradient(135deg, var(--bg-secondary), var(--bg-primary));
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg-primary);color:var(--text-primary);-webkit-font-smoothing:antialiased;text-rendering:optimizeLegibility;scroll-behavior:smooth}
a{text-decoration:none;color:inherit}
.container{width:min(1365px,97%);margin-inline:auto;padding-inline:clamp(.6rem,1.6vw,1.2rem)}
header{padding-top:clamp(1.6rem,5vw,3.6rem);padding-bottom:clamp(.8rem,2.6vw,1.8rem);text-align:center;position:relative}
header::after{content:"";position:absolute;inset:auto 6% 0 6%;height:1px;background:linear-gradient(90deg,transparent,var(--border-color),transparent)}
.brand{display:flex;align-items:center;justify-content:center;gap:.9rem;margin-bottom:.5rem}
.brand-badge{width:clamp(2.6rem,7.4vw,4rem);height:clamp(2.6rem,7.4vw,4rem);border-radius:22%;background:var(--gradient-primary);display:grid;place-items:center;box-shadow:0 18px 45px -14px rgba(99,102,241,.35);transition:var(--transition)}
.brand-badge:hover{transform:translateY(-3px) rotate(5deg);box-shadow:0 25px 60px -12px rgba(99,102,241,.5)}
.brand-badge i{font-size:clamp(1.1rem,2.8vw,1.55rem);color:#fff}
.brand-title{font-weight:900;font-size:var(--fs-xxl);background:var(--gradient-primary);-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;letter-spacing:-.02em}
.tagline{font-size:var(--fs-lg);color:var(--text-secondary);max-width:70ch;margin:0 auto}
.ribbon{display:inline-flex;align-items:center;gap:.5rem;margin-top:.8rem;padding:.45rem .7rem;border-radius:999px;border:1px solid rgba(99,102,241,.25);background:rgba(99,102,241,.12);color:var(--accent-primary);font-weight:900;font-size:.92rem}
.grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:var(--gap);margin-block:clamp(1rem,3.6vw,2rem);perspective:1000px}
@media(max-width:980px){.grid{grid-template-columns:1fr}}
.card{position:relative;background:var(--bg-card);border:1px solid var(--border-color);border-radius:22px;padding:var(--pad);box-shadow:var(--shadow-soft);overflow:hidden;transform-style:preserve-3d;transition:var(--transition)}
.card:hover{transform:translateY(-5px);box-shadow:var(--shadow-strong)}
.card:before{content:"";position:absolute;inset:-1;border-radius:24px;background:conic-gradient(from 0deg,transparent,rgba(99,102,241,.18),transparent 30%);filter:blur(6px);z-index:-1;animation:spin 8s linear infinite}
.badge{position:absolute;top:.8rem;right:.8rem;padding:.45rem .7rem;border-radius:999px;background:var(--gradient-primary);color:#fff;font-weight:900;font-size:.8rem;box-shadow:0 10px 22px -10px rgba(99,102,241,.45)}
.period-chip{position:absolute;top:.8rem;left:.8rem;display:inline-flex;align-items:center;gap:.45rem;padding:.45rem .7rem;border-radius:999px;border:1px solid rgba(16,185,129,.25);background:rgba(16,185,129,.12);color:var(--success);font-weight:900;font-size:.8rem}
.period-chip i{font-size:.85rem}
.head{display:flex;align-items:center;gap:.9rem;margin:1.4rem 0 .4rem 0}
.head .icon{width:2.6rem;height:2.6rem;border-radius:12px;display:grid;place-items:center;background:var(--gradient-primary);box-shadow:0 12px 24px -12px rgba(99,102,241,.4)}
.head .icon i{font-size:1.1rem;color:#fff}
.title{font-weight:900;color:var(--text-primary)}
.price{display:flex;align-items:flex-end;gap:.5rem;margin:.4rem 0 .2rem}
.price .amount{font-size:2.15rem;font-weight:900;letter-spacing:-.4px;color:var(--text-primary)}
.price .period{color:var(--text-secondary);font-weight:800}
.quota{font-size:.96rem;color:var(--text-secondary)}
.features{margin:1rem 0;display:grid;gap:.55rem}
.feature{display:flex;align-items:flex-start;gap:.6rem;color:var(--text-secondary);font-size:.95rem}
.feature i{color:var(--success);min-width:1rem}
.payline{display:flex;align-items:center;gap:.5rem;margin-top:.1rem;font-weight:800;color:var(--text-primary)}
.actions{display:flex;flex-direction:column;gap:.55rem;margin-top:.6rem}
.btn{width:100%;padding:.9rem 1rem;border:none;border-radius:14px;font-weight:900;font-size:1rem;color:#fff;background:var(--gradient-primary);cursor:pointer;transition:var(--transition);box-shadow:0 15px 30px -12px rgba(99,102,241,.4);display:flex;align-items:center;justify-content:center;gap:0.5rem}
.btn:hover{transform:translateY(-2px);box-shadow:0 18px 40px -10px rgba(99,102,241,.5)}
.note{font-size:.85rem;color:var(--text-secondary);text-align:center}
.compare{margin-top:clamp(1rem,3vw,1.6rem);background:var(--bg-card);border:1px solid var(--border-color);border-radius:18px;overflow:hidden}
.table{width:100%;border-collapse:collapse}
.table th,.table td{padding:14px 16px;border-bottom:1px solid var(--border-color);text-align:left}
.table th{background:var(--bg-tertiary);font-weight:900;color:var(--text-primary)}
.table td{background:var(--bg-card);color:var(--text-primary)}
.table td.center{text-align:center}
.toast{position:fixed;left:50%;top:20px;transform:translateX(-50%) translateY(-20px);opacity:0;z-index:50;background:var(--bg-card);border:1px solid var(--border-color);border-radius:12px;box-shadow:var(--shadow-strong);padding:12px 16px;font-weight:800;display:flex;align-items:center;gap:10px;transition:var(--transition)}
.toast.show{opacity:1;transform:translateX(-50%) translateY(0)}
.confetti{position:fixed;top:0;left:0;width:100%;height:100%;pointer-events:none;overflow:hidden;z-index:60}
footer{color:var(--text-secondary);text-align:center;font-size:var(--fs-sm);padding:1.4rem 0;position:relative}
footer::before{content:"";position:absolute;inset:0 6% auto 6%;height:1px;background:linear-gradient(90deg,transparent,var(--border-color),transparent)}
.modal{position:fixed;inset:0;Display:none;align-items:center;justify-content:center;z-index:9999;padding:1rem}
.modal.show{display:flex}
.modal .overlay{position:absolute;inset:0;background:rgba(0,0,0,.8);backdrop-filter:blur(10px);z-index:0}
.modal .panel{position:relative;z-index:1;width:min(640px,92vw);border-radius:20px;border:1px solid var(--border-color);background:var(--bg-card);box-shadow:var(--shadow-strong);padding:2rem;max-height:calc(100vh - 48px);overflow:auto;-webkit-overflow-scrolling:touch;overscroll-behavior:contain}
.modal .head{display:flex;align-items:center;justify-content:space-between;margin:0}
.modal .hleft{display:flex;align-items:center;gap:12px}
.modal .hicon{width:42px;height:42px;border-radius:12px;display:grid;place-items:center;background:var(--gradient-primary);box-shadow:0 12px 24px -12px rgba(99,102,241,.4)}
.modal .hicon i{color:#fff}
.modal .htitle{font-weight:900;color:var(--text-primary)}
.modal .close{appearance:none;border:none;background:transparent;font-size:20px;cursor:pointer;color:var(--text-secondary);padding:0.5rem;border-radius:var(--r);transition:var(--transition)}
.modal .close:hover{background:rgba(255,255,255,0.1);color:var(--text-primary)}
.actions-modal{display:flex;gap:10px;flex-wrap:wrap;margin-top:6px}
.btn-ghost{background:var(--bg-tertiary);border:1px solid var(--border-color);color:var(--text-primary);transition:var(--transition)}
.btn-ghost:hover{background:rgba(255,255,255,0.1);border-color:var(--border-color)}
.btn-primary{background:var(--gradient-primary);color:#fff;transition:var(--transition)}
.btn-primary:hover{transform:translateY(-2px);box-shadow:0 12px 30px -10px rgba(99,102,241,.5)}
@keyframes spin{to{transform:rotate(1turn)}}
@keyframes fall{0%{transform:translateY(-20vh) rotate(0turn);opacity:1}100%{transform:translateY(60vh) rotate(1.5turn);opacity:0}}
@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.02)}100%{transform:scale(1)}}
@keyframes pop{0%{opacity:0;transform:translateY(8px) scale(.98)}100%{opacity:1;transform:translateY(0) scale(1)}}
.modal.show .panel{animation:pop .28s ease}
@media (max-width:560px){.modal .panel{padding:1.5rem;border-radius:18px}}
.tilt{will-change:transform}
.body-modal-open{overflow:hidden}
</style>
</head>
<body>
<div class="container" id="main-container">
<header>
<div class="brand"><div class="brand-badge"><i class="fa-solid fa-robot"></i></div><div class="brand-title">Reporting Bot</div></div>
<p class="tagline">Escolha o plano ideal. Planos mensais de 30 dias e opção vitalícia. Pagamento exclusivo via Pix, suporte rápido por chat</p>
<div class="ribbon"><i class="fa-solid fa-bolt"></i><span>Ativação imediata</span><span style="display:inline-flex;align-items:center;gap:.45rem;padding:.3rem .6rem;border:1px solid rgba(16,185,129,.25);border-radius:999px;background:rgba(16,185,129,.12);color:var(--success);font-weight:900"><i class="fa-brands fa-pix"></i> Pagamento via Pix</span></div>
</header>
<section class="grid" aria-label="Planos disponíveis">
<article class="card tilt" data-plan="Essencial" data-price="R$35" data-period="30 dias">
<div class="period-chip"><i class="fa-solid fa-rotate"></i> Mensal (30 dias)</div>
<div class="head"><div class="icon"><i class="fa-regular fa-gem"></i></div><div class="title">Essencial</div></div>
<div class="price"><div class="amount">R$35</div><div class="period">/ mês • 30 dias</div></div>
<div class="quota">Indicado para remover contas de até 300 seguidores</div>
<div class="features">
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Permite denunciar até 5 contas por dia</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Intervalo mínimo de 1 hora para repetir a mesma conta</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Limite de até 500 denúncias por conta</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Suporte por WhatsApp</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Fila de processamento padrão</span></div>
</div>
<div class="payline"><i class="fa-brands fa-pix"></i><span>Pagamento via Pix</span></div>
<div class="actions"><button class="btn select" type="button"><i class="fa-solid fa-cart-shopping"></i>Assinar Essencial</button><div class="note">QR Code Pix emitido na confirmação</div></div>
</article>
<article class="card tilt" data-plan="Profissional" data-price="R$45,50" data-period="30 dias">
<div class="badge">Mais popular</div>
<div class="period-chip"><i class="fa-solid fa-rotate"></i> Mensal (30 dias)</div>
<div class="head"><div class="icon"><i class="fa-solid fa-rocket"></i></div><div class="title">Profissional</div></div>
<div class="price"><div class="amount">R$45,50</div><div class="period">/ mês • 30 dias</div></div>
<div class="quota">Exigente para remover contas de até 10.000 seguidores e não verificadas</div>
<div class="features">
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Permite denunciar até 15 contas por dia</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Permite repetir a mesma conta</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Limite de até 5.000 denúncias por conta</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Suporte por WhatsApp</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Processamento de fila prioritário</span></div>
</div>
<div class="payline"><i class="fa-brands fa-pix"></i><span>Pagamento via Pix</span></div>
<div class="actions"><button class="btn select" type="button"><i class="fa-solid fa-cart-shopping"></i>Assinar Profissional</button><div class="note">QR Code Pix emitido na confirmação</div></div>
</article>
<article class="card tilt" data-plan="Vitalício" data-price="R$119" data-period="Acesso permanente">
<div class="badge">Melhor valor</div>
<div class="head"><div class="icon"><i class="fa-solid fa-infinity"></i></div><div class="title">Vitalício</div></div>
<div class="price"><div class="amount">R$119</div><div class="period">• acesso permanente</div></div>
<div class="quota">Ideal para remover contas sem limites de seguidores e verificadas por assinatura</div>
<div class="features">
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Sem renovação: acesso vitalício</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Permite repetir a mesma conta</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Limite de até 15.950 denúncias por conta</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Suporte por WhatsApp</span></div>
<div class="feature"><i class="fa-solid fa-check-circle"></i><span>Recursos ilimitados, sucesso garantido e maior prioridade</span></div>
</div>
<div class="payline"><i class="fa-brands fa-pix"></i><span>Pagamento via Pix</span></div>
<div class="actions"><button class="btn select" type="button"><i class="fa-solid fa-cart-shopping"></i>Assinar Vitalício</button><div class="note">Pagamento único com Pix</div></div>
</article>
</section>
<section class="compare" aria-label="Comparativo de recursos">
<table class="table" id="compare-table">
<thead>
<tr><th>Recursos</th><th>Essencial</th><th>Profissional</th><th>Vitalício</th></tr>
</thead>
<tbody>
<tr><td>Contas por dia</td><td class="center">5</td><td class="center">15</td><td class="center">Sob demanda</td></tr>
<tr><td>Repetir mesma conta</td><td class="center">Após 1h</td><td class="center">Permitido</td><td class="center">Permitido</td></tr>
<tr><td>Limite denúncias por operação</td><td class="center">500</td><td class="center">5.000</td><td class="center">15.950</td></tr>
<tr><td>Período</td><td class="center">30 dias</td><td class="center">30 dias</td><td class="center">Permanente</td></tr>
<tr><td>Pagamento</td><td class="center">Pix</td><td class="center">Pix</td><td class="center">Pix (único)</td></tr>
<tr><td>Prioridade</td><td class="center"><i class="fa-regular fa-circle"></i></td><td class="center"><i class="fa-solid fa-circle-half-stroke"></i></td><td class="center"><i class="fa-solid fa-star"></i></td></tr>
<tr><td>Suporte</td><td class="center">Chat</td><td class="center">Chat</td><td class="center">Chat</td></tr>
</tbody>
</table>
</section>
</div>
<div id="toast" class="toast" aria-live="polite"><i class="fa-solid fa-circle-check" style="color:#10b981"></i><span id="toast-text">Plano selecionado</span></div>
<div id="confetti" class="confetti" aria-hidden="true"></div>
<div class="modal" id="modal" role="dialog" aria-modal="true" aria-labelledby="dlg-title">
<div class="overlay" id="overlay"></div>
<div class="panel" id="modal-panel" aria-live="polite" role="document"></div>
</div>
<footer>Reporting Bot © 2025 • Todos os direitos reservados</footer>
<script id="plans-data" type="application/json">{"plans":""}</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    function parsePlans() {
        try {
            var el = document.getElementById("plans-data");
            var raw = el && el.textContent ? el.textContent.trim() : "";
            if (!raw) return null;
            var data = JSON.parse(raw);
            return data && typeof data === "object" ? data : null;
        } catch (e) {
            return null;
        }
    }
    function brl(cents) {
        if (!Number.isFinite(cents)) return "";
        var r = cents / 100;
        var isInt = cents % 100 === 0;
        return isInt ? ("R$" + Math.trunc(r).toLocaleString("pt-BR")) : ("R$" + r.toLocaleString("pt-BR", {minimumFractionDigits: 2, maximumFractionDigits: 2}));
    }
    function mergePlans(runtime) {
        var base = {
            "Essencial": {"amount_cents": 3500, "active": true},
            "Profissional": {"amount_cents": 4550, "active": true},
            "Vitalício": {"amount_cents": 11900, "active": true}
        };
        if (!runtime) return base;
        var out = Object.assign({}, base);
        Object.keys(base).forEach(function(k) {
            if (runtime[k] && typeof runtime[k] === "object") {
                if (Number.isFinite(runtime[k].amount_cents)) out[k].amount_cents = parseInt(runtime[k].amount_cents, 10);
                if (typeof runtime[k].active === "boolean") out[k].active = runtime[k].active;
            }
        });
        return out;
    }
    function applyPrices(plans) {
        document.querySelectorAll(".card").forEach(function(card) {
            var name = card.getAttribute("data-plan");
            var cfg = plans[name];
            if (!cfg) return;
            var priceStr = brl(cfg.amount_cents);
            var amountEl = card.querySelector(".amount");
            amountEl && (amountEl.textContent = priceStr);
            card.setAttribute("data-price", priceStr);
            if (cfg.active !== true) {
                card.style.display = "none";
            } else {
                card.style.display = "";
            }
        });
        var table = document.getElementById("compare-table");
        if (table) {
            var headers = Array.from(table.querySelectorAll("thead th"));
            var colIndexByName = {};
            headers.forEach(function(th, i) {
                colIndexByName[th.textContent.trim()] = i;
            });
            Object.keys(plans).forEach(function(name) {
                if (plans[name].active !== true) {
                    var idx = colIndexByName[name];
                    if (typeof idx === "number" && idx > 0) {
                        headers[idx].style.display = "none";
                        table.querySelectorAll("tbody tr").forEach(function(tr) {
                            var cells = tr.querySelectorAll("td");
                            cells[idx] && (cells[idx].style.display = "none");
                        });
                    }
                } else {
                    var idx2 = colIndexByName[name];
                    if (typeof idx2 === "number" && idx2 > 0) {
                        headers[idx2].style.display = "";
                        table.querySelectorAll("tbody tr").forEach(function(tr) {
                            var cells = tr.querySelectorAll("td");
                            cells[idx2] && (cells[idx2].style.display = "");
                        });
                    }
                }
            });
        }
    }
    function showToast(msg) {
        if (!toast || !toastText) return;
        toastText.textContent = msg;
        toast.classList.add("show");
        setTimeout(function() {
            toast.classList.remove("show");
        }, 1600);
    }
    function burstConfetti(x, y) {
        if (!confetti) return;
        var n = 28;
        for (var i = 0; i < n; i++) {
            var p = document.createElement("span");
            p.style.position = "absolute";
            p.style.left = x + "px";
            p.style.top = y + "px";
            p.style.width = "10px";
            p.style.height = "10px";
            p.style.borderRadius = "2px";
            p.style.background = "hsl(" + Math.floor(Math.random() * 360) + " 90% 60%)";
            p.style.transform = "translateY(-20vh)";
            p.style.animation = "fall 1.2s ease forwards";
            p.style.filter = "drop-shadow(0 6px 6px rgba(0,0,0,.2))";
            p.style.left = "calc(" + x + "px + " + (Math.random() * 80 - 40) + "px)";
            confetti.appendChild(p);
            (function(el) {
                setTimeout(function() {
                    el.parentNode && el.parentNode.removeChild(el);
                }, 1300);
            })(p);
        }
    }
    function handleTabTrap(e) {
        if (!modal || !modal.classList.contains("show")) return;
        var focusables = modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');
        var f = Array.from(focusables).filter(function(el) { return !el.hasAttribute("disabled") && el.tabIndex !== -1; });
        if (f.length === 0) return;
        var first = f[0];
        var last = f[f.length - 1];
        if (e.key === "Tab") {
            if (e.shiftKey && document.activeElement === first) {
                e.preventDefault();
                last.focus();
            } else if (!e.shiftKey && document.activeElement === last) {
                e.preventDefault();
                first.focus();
            }
        }
    }
    function openThankYouModal(plan, price, period) {
        lastFocus = document.activeElement;
        if (!modal) return;
        var panel = document.getElementById('modal-panel');
        if (!panel) return;
        panel.innerHTML = ''
            + '<div class="head">'
            + '  <div class="hleft"><div class="hicon"><i class="fa-brands fa-pix"></i></div><div class="htitle" id="dlg-title">Obrigado — Quase lá!</div></div>'
            + '  <button class="close" id="closeModal" aria-label="Fechar"><i class="fa-solid fa-xmark"></i></button>'
            + '</div>'
            + '<div style="margin-top:12px">'
            + '  <div class="kv" style="margin-bottom:10px"><div class="k">Plano</div><div class="v" id="m-plan">' + escapeHtml(plan) + '</div></div>'
            + '  <div class="kv" style="margin-bottom:10px"><div class="k">Valor</div><div class="v" id="m-price">' + escapeHtml(price) + '</div></div>'
            + '  <div class="kv" style="margin-bottom:6px"><div class="k">Período</div><div class="v" id="m-period">' + escapeHtml(period || '') + '</div></div>'
            + '  <p style="margin-top:12px;color:var(--text-secondary);font-size:0.96rem;line-height:1.45">Recebemos sua solicitação. Ao prosseguir você será redirecionado para a cobrança Pix com os dados do plano selecionado. Após o pagamento, o acesso será ativado automaticamente.</p>'
            + '  <div id="checkout-error" role="status" aria-live="polite" style="margin-top:10px;color:var(--error);font-weight:800;display:none"></div>'
            + '  <div class="actions-modal" style="margin-top:14px">'
            + '    <button type="button" class="btn btn-ghost" id="cancelBtn">Cancelar</button>'
            + '    <button type="button" class="btn btn-primary" id="continueBtn">Continuar para Pix</button>'
            + '  </div>'
            + '</div>';
        modal.classList.add('show');
        document.body.classList.add('body-modal-open');
        if (main) main.setAttribute('inert', '');
        setTimeout(function() {
            try { var cb = document.getElementById('continueBtn'); if (cb) cb.focus(); } catch (e) {}
        }, 50);
        var closeBtn = document.getElementById('closeModal');
        var cancelBtn = document.getElementById('cancelBtn');
        var continueBtn = document.getElementById('continueBtn');
        var errEl = document.getElementById('checkout-error');
        function closeAndRestore() {
            modal && modal.classList.remove('show');
            document.body.classList.remove('body-modal-open');
            if (main) main.removeAttribute('inert');
            if (lastFocus && typeof lastFocus.focus === 'function') try { lastFocus.focus(); } catch (e) {}
        }
        if (closeBtn) closeBtn.addEventListener('click', function() { closeAndRestore(); });
        if (cancelBtn) cancelBtn.addEventListener('click', function() { closeAndRestore(); });
        if (continueBtn) continueBtn.addEventListener('click', function() {
            var planValue = (document.getElementById('m-plan') && document.getElementById('m-plan').textContent) || plan || '';
            if (!planValue) return;
            continueBtn.disabled = true;
            var originalText = continueBtn.textContent;
            continueBtn.textContent = 'Aguarde — gerando cobrança...';
            if (errEl) { errEl.style.display = 'none'; errEl.textContent = ''; }
            var csrfMeta = document.querySelector('meta[name="csrf-token"]');
            var headers = {
                'Accept': 'application/json',
                'Content-Type': 'application/json',
                'X-Requested-With': 'XMLHttpRequest'
            };
            if (csrfMeta && csrfMeta.getAttribute && csrfMeta.getAttribute('content')) {
                headers['X-CSRF-Token'] = csrfMeta.getAttribute('content');
            }
            fetch('/pixPayment', {
                method: 'POST',
                headers: headers,
                body: JSON.stringify({ plan: planValue })
            }).then(function(resp) {
                return resp.json().catch(function() { return { ok: false, error: 'Resposta inválida do servidor' }; });
            }).then(function(json) {
                if (json && json.ok && json.redirect) {
                    window.location.href = json.redirect;
                    return;
                }
                var msg = (json && (json.message || json.error || json.code)) || 'Não foi possível gerar a cobrança.';
                if (errEl) { errEl.textContent = String(msg); errEl.style.display = ''; }
                else alert(String(msg));
            }).catch(function(err) {
                var m = (err && err.message) ? err.message : 'Erro ao gerar cobrança';
                if (errEl) { errEl.textContent = String(m); errEl.style.display = ''; }
                else alert(String(m));
            }).finally(function() {
                continueBtn.disabled = false;
                continueBtn.textContent = originalText;
            });
        });
    }
    function escapeHtml(s) {
        return String(s || '').replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#039;');
    }
    var runtimePlans = parsePlans();
    var currentPlans = mergePlans(runtimePlans);
    applyPrices(currentPlans);
    var toast = document.getElementById("toast");
    var toastText = document.getElementById("toast-text");
    var confetti = document.getElementById("confetti");
    var modal = document.getElementById("modal");
    var overlay = document.getElementById("overlay");
    var main = document.querySelector(".container");
    var lastFocus = null;
    document.addEventListener("click", function(e) {
        var sel = e.target.closest && e.target.closest(".card .select");
        if (!sel) return;
        var card = sel.closest && sel.closest(".card") || sel.parentElement;
        try { if (getComputedStyle(card).display === "none") return; } catch (ee) {}
        card.style.animation = "pulse .6s ease";
        setTimeout(function() { card.style.animation = ""; }, 620);
        var plan = card.getAttribute("data-plan") || '';
        var price = card.getAttribute("data-price") || '';
        var period = card.getAttribute("data-period") || '';
        showToast(plan + " selecionado (" + price + " • " + period + " • Pix)");
        var r = card.getBoundingClientRect();
        burstConfetti(r.left + r.width / 2, r.top + window.scrollY + 40);
        openThankYouModal(plan, price, period);
    });
    if (overlay) {
        overlay.addEventListener("click", function() {
            if (modal && modal.classList.contains("show")) {
                modal.classList.remove("show");
                document.body.classList.remove("body-modal-open");
                if (main) main.removeAttribute("inert");
                if (lastFocus && typeof lastFocus.focus === "function") try { lastFocus.focus(); } catch (e) {}
            }
        });
    }
    document.addEventListener("keydown", function(e) {
        if (e.key === "Escape" && modal && modal.classList.contains("show")) {
            modal.classList.remove("show");
            document.body.classList.remove("body-modal-open");
            if (main) main.removeAttribute("inert");
            if (lastFocus && typeof lastFocus.focus === "function") try { lastFocus.focus(); } catch (err) {}
        }
        handleTabTrap(e);
    });
    document.querySelectorAll && document.querySelectorAll(".tilt").forEach && document.querySelectorAll(".tilt").forEach(function(card) {
        card.addEventListener("mousemove", function(e) {
            var r = card.getBoundingClientRect();
            var x = e.clientX - r.left;
            var y = e.clientY - r.top;
            var rx = ((y - r.height / 2) / r.height) * 6;
            var ry = ((x - r.width / 2) / r.width) * -6;
            card.style.transform = "rotateX(" + rx + "deg) rotateY(" + ry + "deg)";
        });
        card.addEventListener("mouseleave", function() {
            card.style.transform = "rotateX(0) rotateY(0)";
        });
    });
});
</script>
</body>
</html>
